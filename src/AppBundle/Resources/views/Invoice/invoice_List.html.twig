{# EXTENDEMOS LA PLANTILLA 'AppBundle:Layouts:layout.html.twig'...................... #}
	{% extends "AppBundle:Layouts:layout.html.twig"%}
{# ......................EXTENDEMOS LA PLANTILLA 'AppBundle:Layouts:layout.html.twig' #}
{% block stylesheets %}
	{# la función parent() carga todo el contenido del bloque anterior #}
	{{ parent() }}
	<!-- Datatables -->
	<link href="{{ asset ('assets/vendors/datatables.net-bs/css/dataTables.bootstrap.min.css') }}" rel="stylesheet">
	<link href="{{ asset ('assets/vendors/datatables.net-buttons-bs/css/buttons.bootstrap.min.css') }}" rel="stylesheet">
	<link href="{{ asset ('assets/vendors/datatables.net-fixedheader-bs/css/fixedHeader.bootstrap.min.css') }}" rel="stylesheet">
	<link href="{{ asset ('assets/vendors/datatables.net-responsive-bs/css/responsive.bootstrap.min.css') }}" rel="stylesheet">
	<link href="{{ asset ('assets/vendors/datatables.net-scroller-bs/css/scroller.bootstrap.min.css') }}" rel="stylesheet">
	<link href="{{ asset ('assets/vendors/ionicons.com/2.0.1/css/ionicons.min.css') }}" rel="stylesheet">
 {% endblock %}
{% block content %}
<!-- page content -->
	<div class="right_col" role="main">
		<div class="clearfix"></div>
		<div class="row">
			<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
				<div class="x_panel" >
					<div class="x_title">
						<h3 style="display:inline-block;">Listado de Facturas</h3>
					</div>
					<div class="x_content">
						<table id="datatable-responsive" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
							<thead>
								<tr>
									<th colspan="2">NºFª</th>
									<th>Facturado a:</th>
									<th>Fecha</th>
									<th>Cuantía</th>
								</tr>
							</thead>
							<tbody>
								{% for invoice in invoiceList %}
									{# DEFINO VARIABLES ................................................................... #}
										{% set invoiceNumber = invoice.invoiceNumber %}
										{% set registrationDate = invoice.registrationDate | date("d/m/Y") %}
										{% if invoice.medicalHistory != NULL %}
											{% set clinicNameUrl = invoice.medicalHistory.clinic.nameUrl %}	
										{% endif %}
										{% if invoice.business != NULL %}
											{% set clinicNameUrl = invoice.business.clinic.nameUrl %}
										{% endif %}	
									{# ................................................................... DEFINO VARIABLES #}
									<tr>
										<td><a href="{{ path("invoice_view", {'clinicNameUrl': clinicNameUrl, 'invoiceNumber': invoiceNumber } ) }}">FA_{{invoice.invoiceNumber}}</a>
										</td>
										<td><a href="{{ path("invoice_view", {'clinicNameUrl': clinicNameUrl, 'invoiceNumber': invoiceNumber } ) }}"><i class="fa fa-file-pdf-o"></i></a>
										</td>										
										<td>
											<a href="{{ path("invoice_view", {'clinicNameUrl': clinicNameUrl, 'invoiceNumber': invoiceNumber } ) }}">
												{% if invoice.medicalHistory != NULL %}
													{{invoice.medicalHistory.medicalHistoryNumber}} - {{invoice.medicalHistory.surname}}, {{invoice.medicalHistory.name}}
												{% if invoice.business != NULL and invoice.medicalHistory != NULL %}
													( {{invoice.business.businessName}} )
												{% endif %}
												{% endif %}
												{% if invoice.business != NULL and invoice.medicalHistory == NULL %}
													{{invoice.business.businessName}}
												{% endif %}
											</a></td>										
										<td><a href="{{ path("invoice_view", {'clinicNameUrl': clinicNameUrl, 'invoiceNumber': invoiceNumber } ) }}">{{registrationDate}}</a></td>
										<td><a href="{{ path("invoice_view", {'clinicNameUrl': clinicNameUrl, 'invoiceNumber': invoiceNumber } ) }}">{{registrationDate}}</a></td>
									</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
<!-- /page content -->
{% endblock %}
{% block javascriptsFinal %}
	{{ parent() }}
	<!-- Datatables -->
	<script src="{{ asset ('assets/vendors/datatables.net/js/jquery.dataTables.min.js') }}"></script>
	<script src="{{ asset ('assets/vendors/datatables.net-bs/js/dataTables.bootstrap.min.js') }}"></script>
	<script src="{{ asset ('assets/vendors/datatables.net-buttons/js/dataTables.buttons.min.js') }}"></script>
	<script src="{{ asset ('assets/vendors/datatables.net-buttons-bs/js/buttons.bootstrap.min.js') }}"></script>
	<script src="{{ asset ('assets/vendors/datatables.net-buttons/js/buttons.flash.min.js') }}"></script>
	<script src="{{ asset ('assets/vendors/datatables.net-buttons/js/buttons.html5.min.js') }}"></script>
	<script src="{{ asset ('assets/vendors/datatables.net-buttons/js/buttons.print.min.js') }}"></script>
	<script src="{{ asset ('assets/vendors/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js') }}"></script>
	<script src="{{ asset ('assets/vendors/datatables.net-keytable/js/dataTables.keyTable.min.js') }}"></script>
	<script src="{{ asset ('assets/vendors/datatables.net-responsive/js/dataTables.responsive.min.js') }}"></script>
	<script src="{{ asset ('assets/vendors/datatables.net-responsive-bs/js/responsive.bootstrap.js') }}"></script>
	<script src="{{ asset ('assets/vendors/datatables.net-scroller/js/dataTables.scroller.min.js') }}"></script>
{% endblock %}